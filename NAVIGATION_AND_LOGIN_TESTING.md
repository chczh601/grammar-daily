# 导航和登录优化测试指南

## 一、测试目的

验证导航功能和登录体验的优化效果，确保用户能够：
1. 在所有页面中方便地返回上一页
2. 减少重复登录的频率
3. 享受流畅的使用体验

## 二、测试环境

### 2.1 测试设备
- 微信开发者工具
- 真实手机设备（iOS/Android）
- 微信版本：最新稳定版

### 2.2 测试账号
- 测试手机号或邮箱
- 确保能够接收验证码

## 三、导航功能测试

### 测试用例 1：语法详情页导航

**测试步骤：**
1. 打开小程序
2. 点击底部导航栏的"语法知识"
3. 进入语法知识列表页
4. 点击任意语法模块（如"时态"）
5. 进入语法详情页
6. 观察页面顶部导航栏

**预期结果：**
- ✅ 导航栏显示"语法详情"标题
- ✅ 左上角有明显的返回按钮（`<` 图标）
- ✅ 导航栏样式与其他页面一致（蓝色背景，白色文字）

**操作验证：**
1. 点击左上角返回按钮
2. **预期结果**：返回到语法知识列表页 ✅
3. 再次进入语法详情页
4. 使用手机返回键
5. **预期结果**：返回到语法知识列表页 ✅

**截图位置：**
- 语法详情页导航栏
- 返回后的语法知识列表页

---

### 测试用例 2：错题本页导航

**测试步骤：**
1. 在"每日练习"页面答题
2. 答错一道题后，点击"收藏"按钮
3. 点击底部导航栏的"我的"
4. 点击"我的错题本"
5. 进入错题本页面
6. 观察页面顶部导航栏

**预期结果：**
- ✅ 导航栏显示"我的错题本"标题
- ✅ 左上角有明显的返回按钮（`<` 图标）
- ✅ 导航栏样式与其他页面一致

**操作验证：**
1. 点击左上角返回按钮
2. **预期结果**：返回到"我的"页面 ✅
3. 再次进入错题本页面
4. 使用手机返回键
5. **预期结果**：返回到"我的"页面 ✅

**截图位置：**
- 错题本页导航栏
- 返回后的"我的"页面

---

### 测试用例 3：登录页导航

**测试步骤：**
1. 退出登录（在"我的"页面点击"退出登录"）
2. 重新打开小程序
3. 进入登录页
4. 观察页面顶部导航栏

**预期结果：**
- ✅ 导航栏显示"登录"标题
- ✅ 导航栏样式与其他页面一致
- ⚠️ 登录页通常不需要返回按钮（因为是入口页面）

**截图位置：**
- 登录页导航栏

---

### 测试用例 4：TabBar 页面导航

**测试步骤：**
1. 依次访问底部导航栏的四个页面：
   - 每日练习
   - 学习报告
   - 语法知识
   - 我的
2. 观察每个页面的导航栏

**预期结果：**
- ✅ 所有 TabBar 页面都有导航栏
- ✅ 导航栏显示对应的页面标题
- ✅ TabBar 页面没有返回按钮（因为是一级页面）
- ✅ 可以通过底部导航栏自由切换

**截图位置：**
- 四个 TabBar 页面的导航栏

---

## 四、登录体验测试

### 测试用例 5：首次登录

**测试步骤：**
1. 清除小程序数据（微信开发者工具：清除缓存）
2. 重新打开小程序
3. 进入登录页
4. 选择登录方式（手机号或邮箱）
5. 输入手机号/邮箱
6. 点击"获取验证码"
7. 输入收到的验证码
8. 点击"登录"

**预期结果：**
- ✅ 成功接收验证码
- ✅ 验证码输入正确后登录成功
- ✅ 自动跳转到"每日练习"页面
- ✅ 显示用户信息（在"我的"页面）

**记录数据：**
- 登录耗时：___ 秒
- 验证码接收时间：___ 秒

---

### 测试用例 6：自动登录（关闭后重新打开）

**测试步骤：**
1. 完成首次登录（参考测试用例 5）
2. 正常使用小程序（如答题）
3. 关闭小程序（完全退出微信或关闭小程序）
4. 等待 10 秒
5. 重新打开小程序

**预期结果：**
- ✅ 无需重新登录
- ✅ 直接进入"每日练习"页面
- ✅ 用户信息保持不变
- ✅ 可以正常使用所有功能

**记录数据：**
- 启动耗时：___ 秒
- 是否需要重新登录：是 / 否

---

### 测试用例 7：自动登录（后台运行后重新打开）

**测试步骤：**
1. 完成首次登录
2. 正常使用小程序
3. 切换到其他应用（小程序进入后台）
4. 等待 5 分钟
5. 重新打开小程序

**预期结果：**
- ✅ 无需重新登录
- ✅ 直接显示上次浏览的页面
- ✅ 用户信息保持不变
- ✅ 可以正常使用所有功能

**记录数据：**
- 后台运行时间：___ 分钟
- 是否需要重新登录：是 / 否

---

### 测试用例 8：自动登录（长时间未使用）

**测试步骤：**
1. 完成首次登录
2. 关闭小程序
3. 等待 24 小时
4. 重新打开小程序

**预期结果：**
- ✅ 无需重新登录（如果 token 未过期）
- ⚠️ 如果 token 已过期，需要重新登录
- ✅ 登录后数据保持不变

**记录数据：**
- 未使用时间：___ 小时
- 是否需要重新登录：是 / 否
- Token 有效期：___ 小时

---

### 测试用例 9：Token 自动刷新

**测试步骤：**
1. 完成首次登录
2. 持续使用小程序 50 分钟
3. 在第 55 分钟时进行操作（如答题）
4. 观察是否需要重新登录

**预期结果：**
- ✅ 无需重新登录
- ✅ Token 自动刷新
- ✅ 操作正常完成
- ✅ 用户无感知

**记录数据：**
- 使用时长：___ 分钟
- 是否需要重新登录：是 / 否
- Token 刷新次数：___ 次

---

### 测试用例 10：手动退出登录

**测试步骤：**
1. 完成首次登录
2. 进入"我的"页面
3. 点击"退出登录"按钮
4. 确认退出
5. 关闭小程序
6. 重新打开小程序

**预期结果：**
- ✅ 成功退出登录
- ✅ 跳转到登录页
- ✅ 本地会话数据已清除
- ✅ 重新打开时需要登录

**记录数据：**
- 退出登录是否成功：是 / 否
- 重新打开是否需要登录：是 / 否

---

## 五、性能测试

### 测试用例 11：页面切换性能

**测试步骤：**
1. 在"语法知识"页面
2. 点击任意语法模块
3. 记录页面切换时间
4. 点击返回按钮
5. 记录返回时间

**预期结果：**
- ✅ 页面切换流畅，无明显卡顿
- ✅ 切换时间 < 500ms
- ✅ 返回时间 < 300ms

**记录数据：**
- 进入详情页耗时：___ ms
- 返回列表页耗时：___ ms

---

### 测试用例 12：登录性能

**测试步骤：**
1. 清除小程序数据
2. 打开小程序
3. 记录从打开到显示登录页的时间
4. 完成登录
5. 记录从点击登录到进入首页的时间

**预期结果：**
- ✅ 打开到登录页 < 2 秒
- ✅ 登录到首页 < 3 秒
- ✅ 自动登录 < 1 秒

**记录数据：**
- 打开到登录页：___ 秒
- 登录到首页：___ 秒
- 自动登录：___ 秒

---

## 六、兼容性测试

### 测试用例 13：不同设备测试

**测试设备：**
1. iOS 设备（iPhone）
2. Android 设备
3. 微信开发者工具

**测试内容：**
- 导航栏显示是否正常
- 返回按钮是否可用
- 登录功能是否正常
- 自动登录是否生效

**预期结果：**
- ✅ 所有设备上功能正常
- ✅ 界面显示一致
- ✅ 无兼容性问题

**记录数据：**
| 设备类型 | 导航功能 | 登录功能 | 自动登录 | 备注 |
|---------|---------|---------|---------|------|
| iOS     | ✅/❌   | ✅/❌   | ✅/❌   |      |
| Android | ✅/❌   | ✅/❌   | ✅/❌   |      |
| 开发工具 | ✅/❌   | ✅/❌   | ✅/❌   |      |

---

## 七、异常情况测试

### 测试用例 14：网络异常

**测试步骤：**
1. 登录小程序
2. 断开网络连接
3. 尝试切换页面
4. 尝试答题
5. 恢复网络连接

**预期结果：**
- ✅ 导航功能正常（本地页面切换）
- ⚠️ 需要网络的功能显示错误提示
- ✅ 恢复网络后功能正常

---

### 测试用例 15：Token 过期

**测试步骤：**
1. 登录小程序
2. 等待 Token 过期（通常 1 小时）
3. 尝试进行需要认证的操作

**预期结果：**
- ✅ Token 自动刷新
- ⚠️ 如果刷新失败，提示重新登录
- ✅ 重新登录后功能正常

---

## 八、测试报告模板

### 测试概况

| 项目 | 内容 |
|------|------|
| 测试日期 | YYYY-MM-DD |
| 测试人员 | XXX |
| 测试设备 | XXX |
| 微信版本 | X.X.X |
| 小程序版本 | X.X.X |

### 测试结果统计

| 测试类型 | 总用例数 | 通过数 | 失败数 | 通过率 |
|---------|---------|--------|--------|--------|
| 导航功能 | 4 | ___ | ___ | ___% |
| 登录体验 | 6 | ___ | ___ | ___% |
| 性能测试 | 2 | ___ | ___ | ___% |
| 兼容性测试 | 1 | ___ | ___ | ___% |
| 异常测试 | 2 | ___ | ___ | ___% |
| **总计** | **15** | **___** | **___** | **___%** |

### 发现的问题

| 问题编号 | 问题描述 | 严重程度 | 状态 |
|---------|---------|---------|------|
| 1 | | 高/中/低 | 待修复/已修复 |
| 2 | | 高/中/低 | 待修复/已修复 |

### 优化建议

1. 
2. 
3. 

### 测试结论

- [ ] 所有测试用例通过，可以发布
- [ ] 部分测试用例失败，需要修复后重新测试
- [ ] 存在严重问题，需要重大修改

---

## 九、测试检查清单

### 导航功能检查

- [ ] 语法详情页有返回按钮
- [ ] 错题本页有返回按钮
- [ ] 登录页有标准导航栏
- [ ] 所有导航栏样式一致
- [ ] 返回按钮功能正常
- [ ] 手机返回键功能正常

### 登录体验检查

- [ ] 首次登录流程顺畅
- [ ] 关闭后重新打开自动登录
- [ ] 后台运行后自动登录
- [ ] Token 自动刷新
- [ ] 手动退出登录正常
- [ ] 登录状态持久化

### 性能检查

- [ ] 页面切换流畅
- [ ] 登录速度快
- [ ] 自动登录速度快
- [ ] 无明显卡顿

### 兼容性检查

- [ ] iOS 设备正常
- [ ] Android 设备正常
- [ ] 开发工具正常
- [ ] 不同屏幕尺寸正常

### 异常处理检查

- [ ] 网络异常有提示
- [ ] Token 过期自动处理
- [ ] 错误信息友好

---

## 十、测试技巧

### 10.1 如何清除小程序数据

**微信开发者工具：**
1. 点击工具栏的"清缓存"按钮
2. 选择"清除数据缓存"
3. 重新编译

**真实设备：**
1. 长按小程序图标
2. 选择"删除"
3. 重新搜索并打开小程序

### 10.2 如何查看 Token

**微信开发者工具：**
1. 打开"Storage"面板
2. 查看"Storage" → "Local Storage"
3. 找到 `app-80793qvlnlz5-auth-token` 键

### 10.3 如何模拟 Token 过期

**方法 1：修改本地存储**
1. 打开"Storage"面板
2. 删除 `app-80793qvlnlz5-auth-token` 键
3. 刷新页面

**方法 2：等待自然过期**
1. 登录后等待 1 小时
2. 观察 Token 是否自动刷新

---

**文档版本**：v1.0  
**创建日期**：2025-12-04  
**负责人**：秒哒 AI 助手
